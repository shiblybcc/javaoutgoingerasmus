<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
>

<ui:composition template="../layout.xhtml">
    <ui:define name="content">


        <h:form id="changePasswordForm" prependId="false">
            <!-- Messages must be global here, to show bad credentials -->
            <!--<h:messages globalOnly="true"/>-->
            <f:event listener="#{userValidator.validatePassword}" type="postValidate" />

            <!-- Id's must not be changed to support spring security check -->
            <h:panelGrid columns="3" />
            <h:outputLabel for="currentPassword" value="Current Password: * " />
            <h:inputSecret id="currentPassword" value="#{userController.currentPassword}" required="true"
                           requiredMessage="Please enter current password" />
            <h:message for="currentPassword" display="text" style="color:red"/>
            <br />
            <h:outputLabel for="password" value="New Password: * " />
            <h:inputSecret id="password" value="#{userController.user.password}" required="true"
                           requiredMessage="Please enter password" />
            <h:message for="password" display="text" style="color:red"/>
            <br />
            <h:outputLabel for="confirmPassword" value="Confirm Password: * " />
            <h:inputSecret id="confirmPassword" required="true"
                           requiredMessage="Please enter confirm password" />
            <h:message for="confirmPassword" display="text" style="color:red"/>


            <h:commandButton type="submit" id="login" value="Login" action="#{userController.changePassword()}" />

        </h:form>


    </ui:define>
</ui:composition>
</html>
